{"version":3,"sources":["common/hooks/useChageUserInfo.js","pages/UserManagement/UserInfoManagement.jsx"],"names":["useChageUserInfo","axios","useAxios","queryClient","useQueryClient","useMutation","mutationData","a","post","config","apiGateWay","data","code","onMutate","cancelQueries","previousValue","getQueryData","setQueryData","old","onError","_err","_variables","onSettled","invalidateQueries","styled","className","chageUserInfo","mutate","isLoading","useForm","register","handleSubmit","errors","reset","useUserInfo","onSuccess","name","fullname","birth","phone","address","email","src","alt","onSubmit","htmlFor","type","ref","required","disabled","validate","isPhoneNumber","value","test","FormErrors","button","layout","transition","stiffness","damping","color","size","loading","props","theme","colorSecondary"],"mappings":"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","file":"static/js/34.83e063f5.chunk.js","sourcesContent":["import { useMutation, useQueryClient } from \"react-query\";\r\nimport useAxios from \"./useAxios\";\r\nimport { config } from \"../../config/api\";\r\n\r\nconst useChageUserInfo = () => {\r\n  const axios = useAxios();\r\n  const queryClient = useQueryClient();\r\n  const query = useMutation(\r\n    async (mutationData) => {\r\n      const { data } = await axios.post(`${config.apiGateWay}/dashboard/user`, mutationData);\r\n      return data.code;\r\n    },\r\n    {\r\n      // onSuccess: (data) => {\r\n      //   // console.log(data);\r\n      //   queryClient.setQueryData([\"agencyCodes\"], (prev) => {\r\n      //     return { ...prev, data: [data, ...prev.data] };\r\n      //   });\r\n      // },\r\n      onMutate: async (data) => {\r\n        await queryClient.cancelQueries(\"todos\");\r\n\r\n        const previousValue = queryClient.getQueryData(\"userInfo\");\r\n\r\n        queryClient.setQueryData(\"userInfo\", (old) => ({\r\n          ...old,\r\n          ...data,\r\n        }));\r\n\r\n        return previousValue;\r\n      },\r\n      // On failure, roll back to the previous value\r\n      onError: (_err, _variables, previousValue) =>\r\n        queryClient.setQueryData(\"userInfo\", previousValue),\r\n      onSettled: () => {\r\n        queryClient.invalidateQueries([\"user\", \"userInfo\"]);\r\n      },\r\n    }\r\n  );\r\n  return query;\r\n};\r\n\r\nexport default useChageUserInfo;\r\n","import React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport styled from \"styled-components\";\r\nimport FormErrors from \"../../common/components/FormErrors\";\r\nimport useChageUserInfo from \"../../common/hooks/useChageUserInfo\";\r\nimport { useUserInfo } from \"../../common/hooks/useUserInfo\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport { m } from \"framer-motion\";\r\n\r\nconst UserInfoManagement = ({ className }) => {\r\n  // const { name = \"Tên đăng nhập\", fullname = \"Tên của bạn\", birth = \"\" } = data || {};\r\n  const { mutate: chageUserInfo, isLoading } = useChageUserInfo();\r\n  const { register, handleSubmit, errors, reset } = useForm();\r\n  const { data } = useUserInfo({\r\n    onSuccess: ({ name, fullname, birth, phone, address, email }) =>\r\n      reset({ name, fullname, birth, phone, address, email }),\r\n  });\r\n  const handle = (data) => {\r\n    chageUserInfo(data);\r\n  };\r\n  return (\r\n    <section className={`${className} user__management__info col-12 col-md-10`}>\r\n      <header className=\"fs__title fw-bolder\">Thông tin cá nhân</header>\r\n      <div className=\"avatar mt-4 justify-content-center d-flex d-md-none\">\r\n        <img\r\n          src=\"https://www.sohoceravietnam.com/public/img/meow.jpg\"\r\n          alt=\"avatar\"\r\n        />\r\n      </div>\r\n      <form className=\"form mt-4\" onSubmit={handleSubmit(handle)}>\r\n        <div className=\"d-flex flex-column flex-md-row\">\r\n          <label htmlFor=\"\" className=\"fs__text fw-bolder col-12 col-md-6 pe-1\">\r\n            Tên Đăng nhập\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              ref={register({ required: true })}\r\n              disabled\r\n            />\r\n          </label>\r\n          <label htmlFor=\"\" className=\"fs__text fw-bolder col-12 col-md-6 ps-1\">\r\n            Tên\r\n            <input\r\n              type=\"text\"\r\n              name=\"fullname\"\r\n              ref={register({ required: true })}\r\n              disabled={isLoading}\r\n            />\r\n          </label>\r\n        </div>\r\n        <div className=\"d-flex flex-column flex-md-row\">\r\n          <label htmlFor=\"\" className=\"fs__text fw-bolder col-12 col-md-6 pe-1\">\r\n            Ngày Tháng Năm Sinh\r\n            <input\r\n              type=\"date\"\r\n              name=\"birth\"\r\n              ref={register({ required: true })}\r\n              disabled={isLoading}\r\n            />\r\n          </label>\r\n          <label htmlFor=\"\" className=\"fs__text fw-bolder col-md-6 ps-1\">\r\n            Số Điện Thoại\r\n            <input\r\n              type=\"tel\"\r\n              name=\"phone\"\r\n              ref={register({\r\n                validate: {\r\n                  isPhoneNumber: (value) =>\r\n                    /^(0|(\\+84)?)(3[2-9]|5[6|8|9]|7[0|6-9]|8[0-6|8|9]|9[0-4|6-9])[0-9]{7}$/.test(\r\n                      value\r\n                    ) || \"Số điện thoại không đúng\",\r\n                },\r\n              })}\r\n              disabled={isLoading}\r\n            />\r\n          </label>\r\n        </div>\r\n        <div className=\"d-flex flex-column flex-md-row\">\r\n          <label htmlFor=\"\" className=\"fs__text fw-bolder col-12 col-md-6 pe-1\">\r\n            Email\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              ref={register()}\r\n              disabled={isLoading}\r\n            />\r\n          </label>\r\n          <label htmlFor=\"\" className=\"fs__text fw-bolder col-12 col-md-6 ps-1\">\r\n            Địa chỉ\r\n            <input\r\n              type=\"text\"\r\n              name=\"address\"\r\n              ref={register()}\r\n              disabled={isLoading}\r\n            />\r\n          </label>\r\n        </div>\r\n        <FormErrors errors={errors} />\r\n        <m.button\r\n          type=\"submit\"\r\n          className=\"d-inline-flex justify-content-center align-items-center\"\r\n          disabled={isLoading}\r\n          layout\r\n          transition={{ type: \"spring\", stiffness: 100, damping: 20 }}\r\n        >\r\n          {!isLoading ? (\r\n            <div>Sửa thông tin</div>\r\n          ) : (\r\n            <HashLoader color=\"#fafafa\" size={24} loading={true} />\r\n          )}\r\n        </m.button>\r\n      </form>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default styled(UserInfoManagement)`\r\n  &.user__management {\r\n    &__info {\r\n      /* width: 50%; */\r\n      .avatar {\r\n        width: 100%;\r\n        img {\r\n          /* $size: 100px; */\r\n          width: 200px;\r\n          height: 200px;\r\n          border-radius: 50%;\r\n        }\r\n      }\r\n      .form {\r\n        label {\r\n          display: flex;\r\n          flex-direction: column;\r\n        }\r\n        input:not([type=\"submit\"]) {\r\n          margin: 10px 0;\r\n          background-color: rgba(255, 255, 255, 0);\r\n          border: 1px solid ${(props) => props.theme.colorSecondary};\r\n          padding: 10px 10px 10px 0;\r\n          text-indent: 10px;\r\n          border-radius: 8px;\r\n          outline: none;\r\n          color: ${(props) => props.theme.colorSecondary};\r\n          &::placeholder {\r\n            color: ${(props) => props.theme.colorSecondary};\r\n          }\r\n          &:focus {\r\n            border-width: 2px;\r\n          }\r\n        }\r\n        [type=\"submit\"] {\r\n          padding: 10px;\r\n          background-color: ${(props) => props.theme.colorSecondary};\r\n          border: 0;\r\n          color: #fafafa;\r\n          border-radius: 8px;\r\n          font-weight: bold;\r\n          font-size: 16px;\r\n          margin: 10px 0;\r\n        }\r\n        input[type=\"date\"] {\r\n          text-indent: 5px;\r\n          &::-webkit-calendar-picker-indicator {\r\n            cursor: pointer;\r\n            /* filter: invert(1); */\r\n            margin-right: 10px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n"],"sourceRoot":""}