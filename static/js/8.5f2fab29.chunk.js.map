{"version":3,"sources":["common/components/FormErrors/index.jsx","../../src/ErrorMessage.tsx","common/hooks/useRedirect.js","pages/Login/index.jsx"],"names":["FormErrors","errors","className","Object","keys","length","name","ErrorMessage","as","message","render","rest","methods","useFormContext","error","get","messageFromRegister","types","props","assign","children","React","messages","useRedirect","params","history","useHistory","useEffect","some","condition","to","push","memo","styled","auth","useSelector","state","userStatus","shallowEqual","role","userInfo","user","user_login","loading","useMemo","useForm","register","handleSubmit","dispatch","useDispatch","onSubmit","data","loginAction","type","placeholder","disabled","ref","required","href","color","size","theme","breakPoints","xl","colorSecondary","lg","sm"],"mappings":"wHAAA,2BAaeA,IAVI,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OACpB,OACE,qBAAKC,UAAU,QAAf,SACkC,IAA/BC,OAAOC,KAAKH,GAAQI,QACnB,cAAC,IAAD,CAAcJ,OAAQA,EAAQK,KAAMH,OAAOC,KAAKH,GAAQ,S,uFCH1DM,EAAe,gBAQnBC,OACAP,WACAK,SACAG,YACAC,WACGC,kLAEGC,EAAUC,cACVC,EAAQC,YAAId,GAAUW,EAAQX,OAAQK,GAE5C,IAAKQ,EACH,OAAO,KAAP,IAGeE,EAA+BF,EAAxCL,QAA8BQ,EAAUH,EAAVG,MAChCC,EAAQf,OAAOgB,OAAO,GAAIR,EAAM,CACpCS,SAAUJ,GAAuBP,IAGnC,OAAOY,yBAAqBb,GACxBa,uBAAmBb,EAAIU,GACvBR,EACCA,EAAO,CACND,QAASO,GAAuBP,EAChCa,SAAUL,IAEZI,wBAAqBb,GAAiBa,WAAgBH,K,iCCtC5D,kBAeeK,IAZK,SAACC,GACnB,IAAMC,EAAUC,cAChBC,qBAAU,WAMR,OALAH,EAAOI,MAAK,YAAwB,IAArBC,EAAoB,EAApBA,UAAWC,EAAS,EAATA,GAGxB,OADID,GAAWJ,EAAQM,KAAKD,GACrBD,KAEF,eACN,CAACL,EAAQC,M,iJC4ECO,yBAAKC,aA/EN,SAAC,GAA4B,IAA1B/B,EAAyB,EAAzBA,UAAWuB,EAAc,EAAdA,QACpBS,EAAOC,aAAY,SAACC,GAAD,OAAWA,EAAMC,WAAWH,OAAMI,KACrDC,EAAOJ,aAAY,SAACC,GAAD,2BAAWA,EAAMC,kBAAjB,iBAAW,EAAkBG,gBAA7B,iBAAW,EAA4BC,YAAvC,aAAW,EAAkCF,OAAMD,KACtExB,EAAQqB,aAAY,SAACC,GAAD,uBAAWA,EAAMtB,aAAjB,aAAW,EAAa4B,aAAYJ,KACxDK,EAAUR,aAAY,SAACC,GAAD,uBAAWA,EAAMO,eAAjB,aAAW,EAAeD,aAAYJ,KAClEf,YACEqB,mBACE,iBAAM,CACJ,CAAEf,UAAWU,GAAQ,EAAGT,GAAI,qBAC5B,CAAED,UAAWK,EAAMJ,GAAI,YAEzB,CAACS,EAAML,KAX6B,MAcGW,cAAnCC,EAdgC,EAchCA,SAAUC,EAdsB,EActBA,aAAc9C,EAdQ,EAcRA,OAC1B+C,EAAWC,cAajB,OACE,sBAAM/C,UAAS,UAAKA,EAAL,+CAAf,SACE,0BAASA,UAAU,aAAnB,UACE,mBAAGA,UAAU,0BAAb,2CACA,mBAAGA,UAAU,WAAb,sEACA,uBAAMgD,SAAUH,GAjBP,SAACI,GACdH,EACEI,YAAYD,GAAM,SAACZ,GACjB,OAAa,IAATA,EAAmBd,EAAQM,KAAK,qBACvB,IAATQ,EAAmBd,EAAQM,KAAK,mBAI7BN,EAAQM,KAAK,YASpB,UACE,uBACEsB,KAAK,OACL/C,KAAK,OACLgD,YAAY,WACZC,SAAUZ,EACVa,IAAKV,EAAS,CAAEW,SAAU,0EAE5B,uBACEJ,KAAK,WACL/C,KAAK,WACLgD,YAAY,qBACZC,SAAUZ,EACVa,IAAKV,EAAS,CAAEW,SAAU,0EAE5B,cAAC,IAAD,CAAYxD,OAAQA,IACpB,qBAAKC,UAAU,QAAf,SAAwBY,IACxB,qBAAKZ,UAAU,gBAAf,SACE,mBAAGwD,KAAK,IAAR,0CAEF,wBACEL,KAAK,SACLnD,UAAS,kEACPyC,EAAU,WAAa,IAH3B,SAMIA,EAGA,cAAC,IAAD,CAAYgB,MAAM,UAAUC,KAAM,GAAIjB,SAAS,IAF/C,6DAQJ,qBAAKzC,UAAU,OAAf,SACE,sBAAKA,UAAU,cAAf,0DAC0B,cAAC,IAAD,CAAM4B,GAAG,UAAT,iDASlBG,CAAA,IAAD,y0EAsCJ,SAACf,GAAD,OAAWA,EAAM2C,MAAMC,YAAYC,MA6BlB,SAAC7C,GAAD,OAAWA,EAAM2C,MAAMG,kBAKzB,SAAC9C,GAAD,OAAWA,EAAM2C,MAAMG,kBAG3B,SAAC9C,GAAD,OAAWA,EAAM2C,MAAMG,kBAgB/B,SAAC9C,GAAD,OAAWA,EAAM2C,MAAMC,YAAYC,MAGtC,SAAC7C,GAAD,OAAWA,EAAM2C,MAAMC,YAAYG,MAGnC,SAAC/C,GAAD,OAAWA,EAAM2C,MAAMC,YAAYI","file":"static/js/8.5f2fab29.chunk.js","sourcesContent":["import { ErrorMessage } from \"@hookform/error-message\";\r\nimport React from \"react\";\r\n\r\nconst FormErrors = ({ errors }) => {\r\n  return (\r\n    <div className=\"error\">\r\n      {Object.keys(errors).length !== 0 && (\r\n        <ErrorMessage errors={errors} name={Object.keys(errors)[0]} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FormErrors;\r\n","import * as React from 'react';\nimport { useFormContext, get, FieldErrors } from 'react-hook-form';\nimport { Props } from './types';\n\nconst ErrorMessage = <\n  TFieldErrors extends FieldErrors,\n  TAs extends\n    | undefined\n    | React.ReactElement\n    | React.ComponentType<any>\n    | keyof JSX.IntrinsicElements = undefined\n>({\n  as,\n  errors,\n  name,\n  message,\n  render,\n  ...rest\n}: Props<TFieldErrors, TAs>) => {\n  const methods = useFormContext();\n  const error = get(errors || methods.errors, name);\n\n  if (!error) {\n    return null;\n  }\n\n  const { message: messageFromRegister, types } = error;\n  const props = Object.assign({}, rest, {\n    children: messageFromRegister || message,\n  });\n\n  return React.isValidElement(as)\n    ? React.cloneElement(as, props)\n    : render\n    ? (render({\n        message: messageFromRegister || message,\n        messages: types,\n      }) as React.ReactElement)\n    : React.createElement((as as string) || React.Fragment, props);\n};\n\nexport { ErrorMessage };\n","import { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst useRedirect = (params) => {\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    params.some(({ condition, to }) => {\r\n      // console.log(condition, to);\r\n      if (condition) history.push(to);\r\n      return condition;\r\n    });\r\n    return () => {};\r\n  }, [params, history]);\r\n};\r\n\r\nexport default useRedirect;\r\n","import React, { memo, useMemo } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { loginAction } from \"../../redux/action/userAction\";\r\nimport FormErrors from \"../../common/components/FormErrors\";\r\nimport useRedirect from \"../../common/hooks/useRedirect\";\r\nconst Login = ({ className, history }) => {\r\n  const auth = useSelector((state) => state.userStatus.auth, shallowEqual);\r\n  const role = useSelector((state) => state.userStatus?.userInfo?.user?.role, shallowEqual);\r\n  const error = useSelector((state) => state.error?.user_login, shallowEqual);\r\n  const loading = useSelector((state) => state.loading?.user_login, shallowEqual);\r\n  useRedirect(\r\n    useMemo(\r\n      () => [\r\n        { condition: role >= 1, to: \"/agency-dashboard\" },\r\n        { condition: auth, to: \"/user\" },\r\n      ],\r\n      [role, auth]\r\n    )\r\n  );\r\n  const { register, handleSubmit, errors } = useForm();\r\n  const dispatch = useDispatch();\r\n  const handle = (data) => {\r\n    dispatch(\r\n      loginAction(data, (role) => {\r\n        if (role === 1) return history.push(\"/agency-dashboard\");\r\n        if (role === 0) return history.push(\"/getting-report\");\r\n        // console.log(\"====================================\");\r\n        // console.log(role);\r\n        // console.log(\"====================================\");\r\n        return history.push(\"/\");\r\n      })\r\n    );\r\n  };\r\n  return (\r\n    <main className={`${className} form d-flex align-items-center flex-grow-1`}>\r\n      <section className=\"form__form\">\r\n        <p className=\"fs__title--main fw-bold\">Đăng nhập Ngay</p>\r\n        <p className=\"fs__text\">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>\r\n        <form onSubmit={handleSubmit(handle)}>\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            placeholder=\"Username\"\r\n            disabled={loading}\r\n            ref={register({ required: \"Bạn cần nhập đầy đủ thông tin\" })}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"Mật khẩu\"\r\n            disabled={loading}\r\n            ref={register({ required: \"Bạn cần nhập đầy đủ thông tin\" })}\r\n          />\r\n          <FormErrors errors={errors} />\r\n          <div className=\"error\">{error}</div>\r\n          <div className=\"text-end my-1\">\r\n            <a href=\"#\">Quên mật khẩu</a>\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            className={`d-inline-flex justify-content-center align-items-center ${\r\n              loading ? \"disabled\" : \"\"\r\n            }`}\r\n          >\r\n            {!loading ? (\r\n              <div>Đăng Nhập</div>\r\n            ) : (\r\n              <HashLoader color=\"#fafafa\" size={24} loading={true} />\r\n            )}\r\n          </button>\r\n          {/* <input type=\"submit\" value=\"Đăng Nhập\">\r\n            \r\n          </input> */}\r\n          <div className=\"my-1\">\r\n            <div className=\"text-center\">\r\n              Bạn chưa có tài khoản ? <Link to=\"/signup\">Đăng ký</Link>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </section>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default memo(styled(Login)`\r\n  width: 100%;\r\n  .form {\r\n    /* &__img {\r\n      width: 60%;\r\n      display: flex;\r\n      background-color: rgba(0, 0, 0, 0.4);\r\n      flex-direction: column;\r\n      justify-content: space-between;\r\n      padding: 3rem 100px;\r\n      position: relative;\r\n      &::after {\r\n        content: \"\";\r\n        width: 100%;\r\n        height: 100%;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        z-index: -1;\r\n        background-image: url(/images/home3-slide-1.jpg);\r\n        background-size: cover;\r\n      }\r\n      p {\r\n        max-width: 400px;\r\n        font-weight: bold;\r\n        font-size: 2.5em;\r\n      }\r\n      &__logo {\r\n        > img {\r\n          width: 200px;\r\n        }\r\n      }\r\n      &__link {\r\n        a {\r\n          margin-right: 10px;\r\n          font-weight: bolder;\r\n        }\r\n      }\r\n      @media ${(props) => props.theme.breakPoints.xl} {\r\n        width: 50%;\r\n      }\r\n    } */\r\n    &__form {\r\n      text-align: center;\r\n      width: 100%;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      padding: 0 40px;\r\n      > form {\r\n        margin: 0 auto;\r\n        width: 400px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        input,\r\n        button {\r\n          text-indent: 20px;\r\n          background-color: black;\r\n          color: #fafafa;\r\n          height: 50px;\r\n          margin: 10px 0;\r\n          border-radius: 8px;\r\n          border: 1px solid #fafafa;\r\n          font-weight: bold;\r\n          outline: none;\r\n          transition: border 0.2s ease-in;\r\n          &:focus {\r\n            border: 3px solid ${(props) => props.theme.colorSecondary};\r\n          }\r\n        }\r\n        input[type=\"submit\"],\r\n        button[type=\"submit\"] {\r\n          background-color: ${(props) => props.theme.colorSecondary};\r\n          color: #fafafa;\r\n          border-width: 3px;\r\n          border-color: ${(props) => props.theme.colorSecondary};\r\n          &:hover {\r\n          }\r\n        }\r\n        input[type=\"date\"] {\r\n          text-indent: 10px;\r\n          &::-webkit-calendar-picker-indicator {\r\n            cursor: pointer;\r\n            filter: invert(1);\r\n            margin-right: 10px;\r\n          }\r\n        }\r\n        input::-webkit-input-placeholder {\r\n          color: #fafafa;\r\n        }\r\n      }\r\n      /* @media ${(props) => props.theme.breakPoints.xl} {\r\n        width: 50%;\r\n      } */\r\n      @media ${(props) => props.theme.breakPoints.lg} {\r\n        width: 100%;\r\n      }\r\n      @media ${(props) => props.theme.breakPoints.sm} {\r\n        > form {\r\n          width: 100%;\r\n        }\r\n      }\r\n    }\r\n  }\r\n`);\r\n"],"sourceRoot":""}