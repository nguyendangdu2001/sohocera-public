{"version":3,"sources":["common/hooks/useRedirect.js","pages/SignUp/index.jsx"],"names":["useRedirect","params","history","useHistory","useEffect","some","condition","to","cb","replace","styled","className","auth","useSelector","state","userStatus","shallowEqual","role","userInfo","user","error","user_signup","loading","useMemo","useForm","register","handleSubmit","errors","watch","password","useRef","current","dispatch","useDispatch","style","textTransform","onSubmit","rePassword","data","signupAction","push","type","name","placeholder","ref","required","minLength","value","message","pattern","disabled","validate","color","size","props","theme","breakPoints","xl","colorSecondary","lg","sm"],"mappings":"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","file":"static/js/26.6ad1600d.chunk.js","sourcesContent":["import { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst useRedirect = (params) => {\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    params.some(({ condition, to, cb }) => {\r\n      // console.log(condition, to);\r\n      if (condition) {\r\n        history.replace(to);\r\n        cb?.();\r\n      }\r\n      return condition;\r\n    });\r\n    return () => {};\r\n  }, [params, history]);\r\n};\r\n\r\nexport default useRedirect;\r\n","import { ErrorMessage } from \"@hookform/error-message\";\r\nimport React, { useMemo, useRef } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport { useHistory } from \"react-router\";\r\nimport styled from \"styled-components\";\r\nimport useRedirect from \"../../common/hooks/useRedirect\";\r\nimport { signupAction } from \"../../redux/action/userAction\";\r\nimport FormErrors from \"../../common/components/FormErrors\";\r\n\r\nconst SignUp = ({ className }) => {\r\n  const auth = useSelector((state) => state.userStatus.auth, shallowEqual);\r\n  const role = useSelector(\r\n    (state) => state.userStatus?.userInfo?.user?.role,\r\n    shallowEqual\r\n  );\r\n  const error = useSelector((state) => state.error?.user_signup, shallowEqual);\r\n  const loading = useSelector(\r\n    (state) => state.loading?.user_signup,\r\n    shallowEqual\r\n  );\r\n  useRedirect(\r\n    useMemo(\r\n      () => [\r\n        { condition: role >= 1, to: \"/agency-dashboard\" },\r\n        { condition: auth, to: \"/getting-report\" },\r\n      ],\r\n      [role, auth]\r\n    )\r\n  );\r\n  const { register, handleSubmit, errors, watch } = useForm();\r\n  const history = useHistory();\r\n  const password = useRef({});\r\n  password.current = watch(\"password\", \"\");\r\n  const dispatch = useDispatch();\r\n  const handle = ({ rePassword, ...data }) => {\r\n    dispatch(\r\n      signupAction(data, (role) => {\r\n        if (role === 1) history.push(\"/agency-dashboard\");\r\n        if (role === 0) history.push(\"/getting-report\");\r\n        else history.push(\"/\");\r\n      })\r\n    );\r\n  };\r\n  return (\r\n    <main className={`${className} form d-flex align-items-center flex-grow-1`}>\r\n      <section className=\"form__form\">\r\n        <p\r\n          className=\"fs__title--main fw-bold\"\r\n          style={{ textTransform: \"uppercase\" }}\r\n        >\r\n          Đăng ký\r\n        </p>\r\n        {/* <p className=\"fs__text\">\r\n          Lorem ipsum dolor sit amet consectetur adipisicing elit.\r\n        </p> */}\r\n        <form onSubmit={handleSubmit(handle)}>\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            placeholder=\"Tên Đăng nhập\"\r\n            ref={register({\r\n              required: \"Bạn cần nhập tên đăng nhập\",\r\n              minLength: {\r\n                value: 6,\r\n                message: \"Tên đăng nhập có ít nhất 6 ký tự\",\r\n              },\r\n              pattern: {\r\n                value: /^[a-zA-Z0-9]{6,}$/,\r\n                message:\r\n                  \"Tên đăng nhập không được chứa khoảng trống và ký tự đặc biệt\",\r\n              },\r\n            })}\r\n            disabled={loading}\r\n          />\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            placeholder=\"Email\"\r\n            ref={register({ required: \"Bạn cần nhập email\" })}\r\n            disabled={loading}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"Mật khẩu\"\r\n            ref={register({\r\n              required: \"Bạn cần nhập mật khẩu\",\r\n              minLength: {\r\n                value: 6,\r\n                message: \"Mật khẩu cần có ít nhất 6 ký tự\",\r\n              },\r\n            })}\r\n            disabled={loading}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            name=\"rePassword\"\r\n            placeholder=\"Nhập lại mật khẩu\"\r\n            ref={register({\r\n              required: \"Bạn cần nhập lại mật khẩu\",\r\n              validate: (value) =>\r\n                value === password.current || \"Mật khẩu không khớp\",\r\n            })}\r\n            disabled={loading}\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            className=\"absolute-centerd-inline-flex justify-content-center align-items-center\"\r\n            disabled={loading}\r\n          >\r\n            {!loading ? (\r\n              <div>Đăng Ký</div>\r\n            ) : (\r\n              <HashLoader color=\"#fafafa\" size={24} loading={true} />\r\n            )}\r\n          </button>\r\n          <div className=\"error\">{error}</div>\r\n          <FormErrors errors={errors} />\r\n        </form>\r\n      </section>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default styled(SignUp)`\r\n  width: 100%;\r\n\r\n  .form {\r\n    /* &__img {\r\n      width: 60%;\r\n      display: flex;\r\n      background-color: rgba(0, 0, 0, 0.4);\r\n      flex-direction: column;\r\n      justify-content: space-between;\r\n      padding: 3rem 100px;\r\n      position: relative;\r\n      &::after {\r\n        content: \"\";\r\n        width: 100%;\r\n        height: 100%;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        z-index: -1;\r\n        background-image: url(/images/home3-slide-1.jpg);\r\n        background-size: cover;\r\n      }\r\n      p {\r\n        max-width: 400px;\r\n        font-weight: bold;\r\n        font-size: 2.5em;\r\n      }\r\n      &__logo {\r\n        > img {\r\n          width: 200px;\r\n        }\r\n      }\r\n      &__link {\r\n        a {\r\n          margin-right: 10px;\r\n          font-weight: bolder;\r\n        }\r\n      }\r\n      @media ${(props) => props.theme.breakPoints.xl} {\r\n        width: 50%;\r\n      }\r\n    } */\r\n    &__form {\r\n      text-align: center;\r\n      width: 100%;\r\n\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      padding: 0 40px;\r\n      > form {\r\n        margin: 0 auto;\r\n        width: 600px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        input,\r\n        button {\r\n          /* &::placeholder {\r\n            text-transform: uppercase;\r\n          } */\r\n          text-indent: 20px;\r\n          background-color: black;\r\n          color: #fafafa;\r\n          height: 50px;\r\n          margin: 10px 0;\r\n          border-radius: 8px;\r\n          border: 1px solid #fafafa;\r\n          font-weight: bold;\r\n          outline: none;\r\n          transition: border 0.2s ease-in;\r\n          &:focus {\r\n            border: 3px solid ${(props) => props.theme.colorSecondary};\r\n          }\r\n        }\r\n        [type=\"submit\"] {\r\n          text-transform: uppercase;\r\n          background-color: ${(props) => props.theme.colorSecondary};\r\n          color: #fafafa;\r\n          border-width: 3px;\r\n          border-color: ${(props) => props.theme.colorSecondary};\r\n          &:hover {\r\n          }\r\n        }\r\n        input[type=\"date\"] {\r\n          text-indent: 10px;\r\n          &::-webkit-calendar-picker-indicator {\r\n            cursor: pointer;\r\n            filter: invert(1);\r\n            margin-right: 10px;\r\n          }\r\n        }\r\n        input::-webkit-input-placeholder {\r\n          color: #fafafa;\r\n        }\r\n      }\r\n      /* @media ${(props) => props.theme.breakPoints.xl} {\r\n        width: 50%;\r\n      } */\r\n      @media ${(props) => props.theme.breakPoints.lg} {\r\n        width: 100%;\r\n      }\r\n      @media ${(props) => props.theme.breakPoints.sm} {\r\n        > form {\r\n          width: 100%;\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n"],"sourceRoot":""}