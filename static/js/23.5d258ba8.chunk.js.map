{"version":3,"sources":["common/components/Pagination/index.jsx","common/hooks/useCreateCode.js","pages/AgencyDashBoard/ListCodeTable.jsx","pages/AgencyDashBoard/ChartCode.jsx","pages/AgencyDashBoard/ExportPdfSection.jsx","pages/AgencyDashBoard/index.jsx","common/hooks/useAgencyCodes.js"],"names":["styled","currentPage","pageCount","initialPage","onPageChange","className","list","console","log","previousLabel","previousLinkClassName","nextLabel","nextLinkClassName","breakLabel","breakClassName","marginPagesDisplayed","pageRangeDisplayed","selected","current","scrollIntoView","behavior","block","forcePage","containerClassName","subContainerClassName","activeClassName","pageLinkClassName","props","theme","colorSecondary","useCreateCode","axios","useAxios","queryClient","useQueryClient","useHandleErrors","handleError","useMutation","a","post","config","apiGateWay","data","code","onError","err","onSettled","invalidateQueries","ListCodeTable","ref","codes","tempInput","useRef","useState","setSelected","copyToClipBoard","value","select","document","execCommand","map","id_c","fullname","id","OverlayTrigger","placement","trigger","overlay","Tooltip","onClick","style","color","readOnly","type","window","location","hostname","memo","forwardRef","colorCard","colorTextTitle","breakPoints","lg","axes","React","useMemo","primary","position","stacked","show","ChartData","label","secondary","getDatumStyle","transition","series","tooltip","md","sm","ExportPdfSection","open","useModal","isLoading","useSelector","state","loading","export_pdf","error","div","layout","size","page","setPage","setType","createCode","mutate","newCode","sort","Axios","useQuery","get","retry","response","status","keepPreviousData","useAgencyCodes","codesData","handleSort","isPreviousData","v","none_use","used","last_page","table","name","disabled","message","to","columnGap","Pagination"],"mappings":"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","file":"static/js/23.5d258ba8.chunk.js","sourcesContent":["import React from \"react\";\r\nimport ReactPaginate from \"react-paginate\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Pagination = ({\r\n  currentPage,\r\n  pageCount,\r\n  initialPage,\r\n  onPageChange,\r\n  className,\r\n  list,\r\n}) => {\r\n  console.log(currentPage);\r\n  return (\r\n    <div className={className}>\r\n      <ReactPaginate\r\n        pageCount={pageCount}\r\n        initialPage={initialPage - 1}\r\n        previousLabel={\"Trước\"}\r\n        previousLinkClassName={\"previous button-secondary fw-bold\"}\r\n        nextLabel={\"Sau\"}\r\n        nextLinkClassName={\"next button-secondary fw-bold\"}\r\n        breakLabel={\"...\"}\r\n        breakClassName={\"break-me\"}\r\n        marginPagesDisplayed={2}\r\n        pageRangeDisplayed={5}\r\n        onPageChange={({ selected }) => {\r\n          onPageChange(selected + 1);\r\n          if (list?.current)\r\n            list.current.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n        }}\r\n        forcePage={currentPage - 1}\r\n        containerClassName={\"pagination\"}\r\n        subContainerClassName={\"pages pagination\"}\r\n        activeClassName={\"active\"}\r\n        // pageClassName={\"button-secondary--outline fw-bold\"}\r\n        pageLinkClassName={\"button-secondary--outline fw-bold\"}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default styled(Pagination)`\r\n  .pagination {\r\n    display: flex;\r\n    justify-content: center;\r\n    padding: 16px;\r\n    margin-top: 16px;\r\n    column-gap: 8px;\r\n    > li {\r\n      > a {\r\n        padding: 10px 20px;\r\n      }\r\n      &.active {\r\n        a {\r\n          background-color: ${(props) => props.theme.colorSecondary};\r\n          color: #fafafa;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .disabled {\r\n    visibility: hidden;\r\n  }\r\n`;\r\n","import { useMutation, useQueryClient } from \"react-query\";\r\nimport useAxios from \"./useAxios\";\r\nimport { config } from \"../../config/api\";\r\nimport useHandleErrors from \"./useHandleErrors\";\r\n\r\nconst useCreateCode = () => {\r\n  const axios = useAxios();\r\n  const queryClient = useQueryClient();\r\n  const [handleError] = useHandleErrors();\r\n  const query = useMutation(\r\n    async () => {\r\n      const { data } = await axios.post(`${config.apiGateWay}/dashboard/parter`);\r\n      return data.code;\r\n    },\r\n    {\r\n      // onSuccess: (data) => {\r\n      //   // console.log(data);\r\n      //   queryClient.setQueryData([\"agencyCodes\"], (prev) => {\r\n      //     return { ...prev, data: [data, ...prev.data] };\r\n      //   });\r\n      // },\r\n      onError: (err) => {\r\n        handleError(err);\r\n      },\r\n      onSettled: () => {\r\n        queryClient.invalidateQueries([\"user\", \"agencyCodes\"]);\r\n      },\r\n    }\r\n  );\r\n  return query;\r\n};\r\n\r\nexport default useCreateCode;\r\n","import React, { forwardRef, memo, useRef, useState } from \"react\";\r\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\r\nimport styled from \"styled-components\";\r\n\r\nconst ListCodeTable = ({ className, codes }, ref) => {\r\n  const tempInput = useRef(null);\r\n  const [selected, setSelected] = useState();\r\n\r\n  const copyToClipBoard = (data) => {\r\n    if (!tempInput) return;\r\n    tempInput.current.value = data;\r\n    tempInput.current.select();\r\n    document.execCommand(\"copy\");\r\n  };\r\n  return (\r\n    <main\r\n      className={`${className} management__table container-fluid`}\r\n      ref={ref}\r\n    >\r\n      <div className=\"container overflow-auto\">\r\n        <table>\r\n          <tbody>\r\n            <tr className=\"d-none d-lg-table-row\">\r\n              <th>#</th>\r\n              <th>Code</th>\r\n              <th>Họ và tên</th>\r\n              <th>Tình trạng</th>\r\n              <th>Link kích hoạt</th>\r\n            </tr>\r\n\r\n            {codes?.map(({ id_c, code, fullname, id }) => (\r\n              <tr key={id_c}>\r\n                <td>{id_c}</td>\r\n                <td>\r\n                  <OverlayTrigger\r\n                    placement=\"bottom\"\r\n                    trigger={[\"hover\"]}\r\n                    key={id_c}\r\n                    overlay={\r\n                      <Tooltip id={`tooltip-${id_c}`} key={id_c}>\r\n                        <strong>\r\n                          {selected === id_c ? \"Copied!\" : \"click to copy !\"}\r\n                        </strong>\r\n                        .\r\n                      </Tooltip>\r\n                    }\r\n                  >\r\n                    <button\r\n                      className=\"management__table--icon\"\r\n                      onClick={() => {\r\n                        copyToClipBoard(code);\r\n                        setSelected(id_c);\r\n                      }}\r\n                    >\r\n                      {code}&nbsp;\r\n                      <i className=\"far fa-clipboard\"></i>\r\n                    </button>\r\n                  </OverlayTrigger>\r\n                </td>\r\n                <td>{fullname}</td>\r\n                <td\r\n                  className=\"fw-bolder\"\r\n                  style={{ color: !id ? \"#2fb32f\" : \"#f3390f\" }}\r\n                >\r\n                  {!id ? \"Chưa sử dụng\" : \"Đã sử dụng\"}\r\n                </td>\r\n                <td>\r\n                  <div>\r\n                    <OverlayTrigger\r\n                      placement=\"bottom\"\r\n                      trigger={[\"hover\"]}\r\n                      overlay={\r\n                        <Tooltip id={`tooltip-${id_c}2`} key={id_c + 2}>\r\n                          <strong>\r\n                            {selected === id_c + 2\r\n                              ? \"Copied!\"\r\n                              : \"click to copy !\"}\r\n                          </strong>\r\n                          .\r\n                        </Tooltip>\r\n                      }\r\n                    >\r\n                      <input\r\n                        readOnly\r\n                        type=\"text\"\r\n                        value={\r\n                          !id\r\n                            ? `${window.location.hostname}/code/?ref=${code}`\r\n                            : \"\"\r\n                        }\r\n                        onClick={() => {\r\n                          setSelected(id_c + 2);\r\n                          copyToClipBoard(\r\n                            !id\r\n                              ? `${window.location.hostname}/code/?ref=${code}`\r\n                              : \"\"\r\n                          );\r\n                        }}\r\n                      />\r\n                    </OverlayTrigger>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {/* <td>1</td>\r\n              <td>\r\n                <button\r\n                  className=\"management__table--icon\"\r\n                  data-share=\"342T3F\"\r\n                  onClick={() => {\r\n                    copyToClipBoard(\"342T3F\");\r\n                  }}\r\n                >\r\n                  342T3F\r\n                  <i className=\"far fa-clipboard\"></i>\r\n                </button>\r\n              </td>\r\n              <td>Võ Quyết Thắng</td>\r\n              <td>Đã dùng</td> */}\r\n          </tbody>\r\n        </table>\r\n        <input type=\"text\" id=\"temp\" readOnly ref={tempInput} />\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default memo(styled(forwardRef(ListCodeTable))`\r\n  position: relative;\r\n  &::before {\r\n    margin-top: 30px;\r\n    z-index: -1;\r\n    content: \"\";\r\n    background-color: #225d5a;\r\n    position: absolute;\r\n    top: 0;\r\n    height: 44px;\r\n    width: 100%;\r\n  }\r\n  padding: 30px 0;\r\n  /* background-color: ${(props) => props.theme.colorCard}; */\r\n  background-color: #2b2b2b0d;\r\n  table {\r\n    width: 100%;\r\n    tr {\r\n      &:first-of-type {\r\n        background-color: #225d5a;\r\n        color: #fafafa;\r\n      }\r\n    }\r\n  }\r\n\r\n  th {\r\n    padding: 10px 30px 10px 0;\r\n  }\r\n  td {\r\n    /* $py: 20px; */\r\n    padding: 10px 30px 10px 0;\r\n    input {\r\n      color: ${(props) => props.theme.colorSecondary};\r\n      border: 0;\r\n      outline: none;\r\n      background-color: rgba(255, 255, 255, 0);\r\n    }\r\n    input[type=\"button\"] {\r\n      color: black;\r\n      background-color: ${(props) => props.theme.colorCard};\r\n      padding: 10px;\r\n      font-weight: bolder;\r\n      border: 1.5px solid ${(props) => props.theme.colorSecondary};\r\n      transition: all 250ms cubic-bezier(0.3, 0.7, 0.4, 1.5);\r\n      &:hover {\r\n        background-color: ${(props) => props.theme.colorSecondary};\r\n        color: #fafafa;\r\n      }\r\n    }\r\n  }\r\n  #temp {\r\n    position: absolute;\r\n    opacity: 0;\r\n  }\r\n  .modal__custom {\r\n    background-color: #2b2b2bfa;\r\n    &__header,\r\n    &__footer {\r\n      border: 0;\r\n    }\r\n    &__button--close {\r\n      color: #fafafa !important;\r\n      font-weight: bolder;\r\n      &:hover {\r\n        color: ${(props) => props.theme.colorTextTitle};\r\n      }\r\n    }\r\n  }\r\n  .management {\r\n    &__table {\r\n      &--icon {\r\n        white-space: nowrap;\r\n        background-color: rgba(255, 255, 255, 0);\r\n        border: 0;\r\n        color: ${(props) => props.theme.colorTextTitle};\r\n      }\r\n    }\r\n  }\r\n  @media ${(props) => props.theme.breakPoints.lg} {\r\n    overflow-x: auto;\r\n    td {\r\n      position: relative;\r\n      display: flex;\r\n      &::before {\r\n        /* Now like a table header */\r\n        /* Top/left values mimic padding */\r\n\r\n        width: 20%;\r\n\r\n        white-space: nowrap;\r\n        padding-left: 8px;\r\n        margin-right: 16px;\r\n      }\r\n\r\n      &:nth-of-type(1) {\r\n        background-color: #225d5a;\r\n        color: #fafafa;\r\n        font-weight: bolder;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        &::before {\r\n          content: \"#\";\r\n        }\r\n      }\r\n      &:nth-of-type(2):before {\r\n        content: \"Code\";\r\n      }\r\n      &:nth-of-type(3):before {\r\n        content: \"Name\";\r\n      }\r\n      &:nth-of-type(4):before {\r\n        content: \"Active\";\r\n      }\r\n      &:nth-of-type(5):before {\r\n        content: \"Link\";\r\n      }\r\n    }\r\n  }\r\n`);\r\n","import React, { memo } from \"react\";\r\nimport { Chart } from \"react-charts\";\r\nimport styled from \"styled-components\";\r\n\r\nconst ChartCode = ({ className }) => {\r\n  const axes = React.useMemo(\r\n    () => [\r\n      { primary: true, type: \"ordinal\", position: \"bottom\" },\r\n      { position: \"left\", type: \"linear\", stacked: true, show: true },\r\n    ],\r\n    []\r\n  );\r\n  const ChartData = React.useMemo(\r\n    () => [\r\n      {\r\n        label: \"Code xuất ra\",\r\n        data: [\r\n          { primary: \"tháng 1\", secondary: 2 },\r\n          { primary: \"tháng 2\", secondary: 2 },\r\n\r\n          { primary: \"tháng 3\", secondary: 2 },\r\n\r\n          { primary: \"tháng 4\", secondary: 2 },\r\n          { primary: \"tháng 5\", secondary: 3 },\r\n          { primary: \"tháng 6\", secondary: 2 },\r\n          { primary: \"tháng 7\", secondary: 2 },\r\n          { primary: \"tháng 8\", secondary: 2 },\r\n          { primary: \"tháng 9\", secondary: 2 },\r\n          { primary: \"tháng 10\", secondary: 2 },\r\n          { primary: \"tháng 11\", secondary: 2 },\r\n          { primary: \"tháng 12\", secondary: 2 },\r\n        ],\r\n      },\r\n    ],\r\n    []\r\n  );\r\n  return (\r\n    <div className={`${className} mt-5`}>\r\n      <div className=\"fw-bolder fs__title mb-3\">Thống kê</div>\r\n      <div className=\"chart-container\">\r\n        <Chart\r\n          getDatumStyle={() => ({\r\n            transition: \"all .5s ease\",\r\n          })}\r\n          series={{ type: \"bar\" }}\r\n          axes={axes}\r\n          data={ChartData}\r\n          tooltip\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(styled(ChartCode)`\r\n  .chart-container {\r\n    height: 500px;\r\n    @media ${(props) => props.theme.breakPoints.lg} {\r\n      height: 400px;\r\n    }\r\n    @media ${(props) => props.theme.breakPoints.md} {\r\n      height: 300px;\r\n    }\r\n    @media ${(props) => props.theme.breakPoints.sm} {\r\n      height: 250px;\r\n    }\r\n  }\r\n`);\r\n","import React, { memo } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport useModal from \"../../common/hooks/useModal\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport { m } from \"framer-motion\";\r\n\r\nconst ExportPdfSection = () => {\r\n  const { open } = useModal(\"PDF_EXPORT\");\r\n  const isLoading = useSelector((state) => !!state.loading?.export_pdf);\r\n  const error = useSelector((state) => state.error?.export_pdf);\r\n  return (\r\n    <div className=\"d-flex flex-column mb-2\">\r\n      <m.div\r\n        layout\r\n        className=\"button-secondary px-3 py-3 fw-bold d-inline-flex\"\r\n        onClick={open}\r\n      >\r\n        <div>{isLoading ? \"Đang xuất pdf\" : \"Xuất pdf cho khách\"}</div>\r\n        &nbsp;\r\n        <HashLoader color=\"#fafafa\" size={24} loading={isLoading} />\r\n      </m.div>\r\n      <div className=\"error mt-2\">{error}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(ExportPdfSection);\r\n","import React, { memo, useRef, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Pagination from \"../../common/components/Pagination\";\r\nimport { useAgencyCodes } from \"../../common/hooks/useAgencyCodes\";\r\nimport useCreateCode from \"../../common/hooks/useCreateCode\";\r\nimport ListCodeTable from \"./ListCodeTable\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport useModal from \"../../common/hooks/useModal\";\r\nimport ChartCode from \"./ChartCode\";\r\nimport ExportPdfSection from \"./ExportPdfSection\";\r\nconst AgencyDashBoard = ({ className }) => {\r\n  const { open } = useModal(\"PDF_EXPORT\");\r\n  const [page, setPage] = useState(1);\r\n  const [type, setType] = useState(null);\r\n  const {\r\n    mutate: createCode,\r\n    data: newCode,\r\n    isLoading,\r\n    error,\r\n  } = useCreateCode();\r\n  const {\r\n    data: codesData,\r\n    isLoading: codeLoading,\r\n    isPreviousData,\r\n  } = useAgencyCodes(page, type);\r\n  const handleSort = (sort) => {\r\n    return () => {\r\n      setPage(1);\r\n      setType((v) => (v !== sort ? sort : null));\r\n    };\r\n  };\r\n  const { none_use, used, codes } = codesData || {};\r\n  const { last_page, data } = codes || {};\r\n  const table = useRef(null);\r\n  // const tableLoading = codeLoading || isPreviousData;\r\n\r\n  return (\r\n    <main className={className}>\r\n      <section className={`container mt-3`}>\r\n        <header className=\"fs__title--main fw-bolder mb-3\">\r\n          Quản lý báo cáo\r\n        </header>\r\n        <div className=\"d-flex flex-column flex-lg-row\">\r\n          <div className=\"d-flex col-12 col-lg-4\">\r\n            <div className=\"management__card w-50\">\r\n              <p className=\"mb-0\">Chưa sử dụng</p>\r\n              <p className=\"fs__title--main\">{none_use || 0}</p>\r\n            </div>\r\n            <div className=\"management__card w-50\">\r\n              <p className=\"mb-0\">Đã sử dụng</p>\r\n              <p className=\"fs__title--main\">{used || 0}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"management__form col-12 col-lg-4\">\r\n            <p className=\"fs__title\">Tạo mã mới</p>\r\n            <form className=\"d-flex flex-column\">\r\n              <div className=\"d-flex\">\r\n                <input\r\n                  className=\"management__form__input\"\r\n                  type=\"text\"\r\n                  name=\"\"\r\n                  id=\"\"\r\n                  value={newCode?.code || \"\"}\r\n                  readOnly\r\n                />\r\n                <button\r\n                  className=\"management__form__button\"\r\n                  type=\"button\"\r\n                  disabled={isLoading}\r\n                  onClick={createCode}\r\n                >\r\n                  {!isLoading ? (\r\n                    <div>Tạo mã mới</div>\r\n                  ) : (\r\n                    <HashLoader color=\"#fafafa\" size={24} loading={isLoading} />\r\n                  )}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"error mt-3\">{error?.response?.data?.message}</div>\r\n            </form>\r\n\r\n            <p className=\"fs__smallest mt-4\">Chú ý:...</p>\r\n          </div>\r\n          <div className=\"mt-3 d-flex flex-column col-12 col-lg-4\">\r\n            <div className=\"d-flex flex-column\">\r\n              <ExportPdfSection />\r\n              <span\r\n                className=\"button-secondary px-3 py-3 fw-bold mb-3\"\r\n                to=\"/user/pdf\"\r\n                onClick={open}\r\n              >\r\n                Kích hoạt tài khoản\r\n              </span>\r\n              <span\r\n                className=\"button-secondary px-3 py-3 fw-bold\"\r\n                to=\"/user/pdf\"\r\n                onClick={open}\r\n              >\r\n                Xuất danh sách khách hàng\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ChartCode />\r\n\r\n        <div className=\"fs__title fw-bolder mb-3 mt-5 d-flex justify-content-between align-items-center\">\r\n          Danh sách khách hàng\r\n          <div className=\"d-flex\" style={{ columnGap: 8 }}>\r\n            <span\r\n              className={`fs__text ${\r\n                type === 1 ? \"button-secondary\" : \"button-secondary--outline\"\r\n              } p-3 text-center`}\r\n              onClick={handleSort(1)}\r\n            >\r\n              Đã sử dụng\r\n            </span>\r\n            <span\r\n              className={`fs__text ${\r\n                type === 0 ? \"button-secondary\" : \"button-secondary--outline\"\r\n              } p-3 text-center`}\r\n              onClick={handleSort(0)}\r\n            >\r\n              Chưa sử dụng\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <ListCodeTable codes={data} ref={table} />\r\n      {codesData && (\r\n        <Pagination\r\n          currentPage={page}\r\n          pageCount={last_page}\r\n          initialPage={page}\r\n          onPageChange={setPage}\r\n          list={table}\r\n        />\r\n      )}\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default memo(styled(AgencyDashBoard)`\r\n  .management {\r\n    &__form {\r\n      padding: 10px 20px 10px 20px;\r\n      /* margin-left: 30px; */\r\n      border-left: 1px solid ${(props) => props.theme.colorSecondary};\r\n      @media ${(props) => props.theme.breakPoints.md} {\r\n        margin-left: 0;\r\n      }\r\n      &__input {\r\n        color: ${(props) => props.theme.colorSecondary};\r\n        padding: 10px 0;\r\n        text-indent: 10px;\r\n        border: 0;\r\n        background-color: ${(props) => props.theme.colorCard};\r\n        box-shadow: 0 0 0 2px ${(props) => props.theme.colorSecondary};\r\n\r\n        &:focus {\r\n          outline: none;\r\n        }\r\n      }\r\n      &__button {\r\n        min-width: 112px;\r\n        color: #fafafa;\r\n        background-color: ${(props) => props.theme.colorSecondary};\r\n        padding: 10px;\r\n        border: 0;\r\n        font-weight: bolder;\r\n        /* &:hover {\r\n          background-color: ${(props) => props.theme.colorSecondary};\r\n          color: #000;\r\n        } */\r\n      }\r\n    }\r\n    &__card {\r\n      width: 200px;\r\n      padding: 20px;\r\n      border-radius: 16px;\r\n      background-color: ${(props) => props.theme.colorCard};\r\n      margin: 20px 20px 20px 0;\r\n      p:nth-child(2) {\r\n        font-weight: bolder;\r\n      }\r\n    }\r\n  }\r\n`);\r\n","import { useQuery } from \"react-query\";\r\nimport { config } from \"../../config/api\";\r\nimport useAxios from \"./useAxios\";\r\nimport useHandleErrors from \"./useHandleErrors\";\r\n\r\nexport const useAgencyCodes = (page = 1, sort) => {\r\n  const [handleError] = useHandleErrors();\r\n  const Axios = useAxios();\r\n  const queryInstance = useQuery(\r\n    [\"user\", \"agencyCodes\", page, sort],\r\n    async () => {\r\n      const { data } = await Axios.get(\r\n        `${config.apiGateWay}/dashboard/parter?page=${page}&type=${sort}`\r\n      );\r\n      return data;\r\n    },\r\n    {\r\n      onError: (err) => {\r\n        handleError(err);\r\n      },\r\n      retry: (retry, err) => {\r\n        // console.log(JSON.parse(JSON.stringify(err)));\r\n        if (err?.response?.status === 401) return false;\r\n        if (retry > 3) return false;\r\n        return true;\r\n      },\r\n      keepPreviousData: true,\r\n    }\r\n  );\r\n  return queryInstance;\r\n};\r\n"],"sourceRoot":""}